{% extends "base.html" %}

{% block content %}
<div class="relative min-h-screen bg-dark-base">
    <!-- Development Mode Notice — slim top bar -->
    <div class="absolute top-0 left-0 right-0 z-10 bg-dark-surface/90 border-b border-amber-500/20 py-2 px-4 text-center">
        <p class="text-amber-400/80 text-xs font-medium">
            Development Mode — Contact <a href="mailto:christophertrogers37@gmail.com" class="underline hover:text-amber-300">christophertrogers37@gmail.com</a> for access
        </p>
    </div>

    <div class="absolute inset-0" style="background-image: url('/static/images/hero-pattern.svg'); opacity: 0.3; pointer-events: none;"></div>
    
    <!-- Hero Section — Two-Column Layout -->
    <div class="relative pt-20 pb-16 px-6">
        <div class="w-full max-w-7xl mx-auto">
            <div class="flex flex-col lg:flex-row items-center gap-12">

                <!-- Left Column: Text Content -->
                <div class="flex-1 lg:max-w-[55%] text-center lg:text-left animate-fade-in space-y-6">
                    <h1 class="text-6xl font-bold neon-text-glow"><span class="text-white">Shuff</span><span class="text-spotify-green">ify</span></h1>
                    <h2 class="text-3xl font-semibold text-white/90">Playlist Perfection</h2>
                    <p class="text-xl text-white/80 max-w-xl leading-relaxed">
                        Reorder your carefully curated Spotify playlists with intelligent shuffling algorithms.
                        Perfect for tastemakers who want to keep their playlists fresh and flowing.
                    </p>

                    {% if not session.get('spotify_token') %}
                    <div class="mt-8">
                        <!-- Legal Consent Form -->
                        <form action="{{ url_for('main.login') }}" method="GET" class="max-w-lg mx-auto lg:mx-0">
                            <!-- Consent Card -->
                            <div class="consent-card bg-dark-card rounded-2xl p-6 border border-spotify-green/20 mb-6">
                                <div class="flex items-start space-x-4">
                                    <div class="flex-shrink-0">
                                        <div class="w-8 h-8 bg-spotify-green rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="text-lg font-semibold text-white mb-2">Quick & Secure</h4>
                                        <p class="text-white/80 text-sm mb-4">
                                            We use Spotify's secure OAuth to access your playlists. We store your settings and playlist information to power features like snapshots, scheduling, and undo.
                                        </p>
                                        <div class="flex items-start space-x-3">
                                            <input type="checkbox" id="legal-consent" name="legal_consent" required
                                                   class="mt-1 h-4 w-4 text-spotify-green bg-white border-white/30 rounded focus:ring-spotify-green focus:ring-2">
                                            <label for="legal-consent" class="text-sm text-white/90 leading-relaxed legal-links">
                                                I agree to the
                                                <a href="{{ url_for('main.terms') }}" target="_blank" class="text-spotify-green hover:underline font-medium">Terms of Service</a>
                                                and
                                                <a href="{{ url_for('main.privacy') }}" target="_blank" class="text-spotify-green hover:underline font-medium">Privacy Policy</a>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- CTA Button -->
                            <button type="submit"
                                    class="w-full inline-flex items-center justify-center px-8 py-4 rounded-full bg-white text-spotify-dark font-bold transition-all duration-300 text-lg hover:bg-white/90 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed cta-button"
                                    id="login-button"
                                    aria-label="Connect with Spotify to start shuffling playlists">
                                <svg class="w-6 h-6 mr-3" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/>
                                </svg>
                                <div class="text-left">
                                    <div class="font-bold">Start Reordering Now</div>
                                    <div class="text-sm opacity-90" id="cta-subtext">Free • Approve & Connect</div>
                                </div>
                            </button>
                        </form>
                    </div>
                    {% endif %}
                </div>

                <!-- Right Column: Animated Playlist Visualization -->
                <div class="flex-1 lg:max-w-[45%] w-full max-w-[420px]" aria-hidden="true">
                    <div id="shuffle-demo" class="shuffle-demo-card rounded-2xl overflow-hidden"
                         style="background: rgba(255,255,255,0.05); border: 1px solid rgba(29,185,84,0.15); box-shadow: 0 0 40px rgba(29,185,84,0.05);">

                        <!-- Card Header -->
                        <div class="flex items-center justify-between px-5 py-3" style="border-bottom: 1px solid rgba(255,255,255,0.08);">
                            <div class="flex items-center space-x-3">
                                <!-- Play icon -->
                                <div class="w-8 h-8 bg-spotify-green rounded-full flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white ml-0.5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M8 5v14l11-7z"/>
                                    </svg>
                                </div>
                                <div>
                                    <div class="text-white text-sm font-semibold">My Playlist</div>
                                    <div class="text-white/40 text-xs">8 tracks</div>
                                </div>
                            </div>
                            <div id="shuffle-indicator" class="text-xs font-medium px-2 py-1 rounded-full text-spotify-green opacity-0 transition-opacity duration-300" style="background: rgba(29,185,84,0.1);">
                                Shuffling...
                            </div>
                        </div>

                        <!-- Track List -->
                        <div id="shuffle-track-list" class="relative" style="padding: 4px 0;">
                            <!-- Tracks are rendered by JavaScript -->
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- How It Works Section -->
    <div class="relative pt-16 pb-16">
        <div class="w-full max-w-6xl mx-auto px-4">
            <h3 class="scroll-reveal text-3xl font-bold text-white text-center mb-16">How It Works</h3>

            <div class="relative grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-8">
                <!-- Timeline connector line (horizontal on desktop, vertical on mobile) -->
                <div class="timeline-connector" aria-hidden="true"></div>
                <div class="timeline-connector-vertical" aria-hidden="true"></div>

                <!-- Step 1: Connect -->
                <div class="scroll-reveal scroll-reveal-delay-1 text-center relative z-10">
                    <div class="step-circle bg-spotify-dark border-2 border-spotify-green text-spotify-green rounded-full w-14 h-14 flex items-center justify-center mx-auto mb-5 font-bold text-xl">
                        <!-- Link/chain icon -->
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold text-white mb-3">Connect</h4>
                    <p class="text-white/70 max-w-xs mx-auto">Link your Spotify account in one click</p>
                </div>

                <!-- Step 2: Choose -->
                <div class="scroll-reveal scroll-reveal-delay-2 text-center relative z-10">
                    <div class="step-circle bg-spotify-dark border-2 border-spotify-green text-spotify-green rounded-full w-14 h-14 flex items-center justify-center mx-auto mb-5 font-bold text-xl">
                        <!-- Sliders/settings icon -->
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold text-white mb-3">Choose</h4>
                    <p class="text-white/70 max-w-xs mx-auto">Pick your playlist and reordering algorithm</p>
                </div>

                <!-- Step 3: Reorder -->
                <div class="scroll-reveal scroll-reveal-delay-3 text-center relative z-10">
                    <div class="step-circle bg-spotify-dark border-2 border-spotify-green text-spotify-green rounded-full w-14 h-14 flex items-center justify-center mx-auto mb-5 font-bold text-xl">
                        <!-- Shuffle arrows icon -->
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold text-white mb-3">Reorder</h4>
                    <p class="text-white/70 max-w-xs mx-auto">Enjoy a fresh playlist flow in seconds</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Developer Testimonial Section -->
    <div class="relative py-16">
        <div class="w-full max-w-4xl mx-auto px-4 text-center">
            <h3 class="scroll-reveal text-2xl font-semibold text-white mb-10">Why I Built This</h3>

            <!-- Developer Testimonial -->
            <div class="scroll-reveal scroll-reveal-delay-1 max-w-3xl mx-auto">
                <div class="relative bg-white/5 backdrop-blur-xl rounded-2xl p-8 border border-white/10 quote-accent-bar text-left">
                    <!-- Decorative quotation mark -->
                    <div class="quote-decoration" aria-hidden="true">&ldquo;</div>

                    <div class="flex items-start space-x-5">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 bg-spotify-green rounded-full flex items-center justify-center">
                                <span class="text-white font-bold text-lg">C</span>
                            </div>
                        </div>
                        <div class="flex-1">
                            <blockquote class="text-white/90 text-lg leading-relaxed italic relative z-10">
                                "I curate many large playlists and shuffify allows me to easily rearrange them to keep them feeling fresh, especially after I spend hours crate-digging and dumping new finds in at the bottom!"
                            </blockquote>
                            <div class="mt-5 flex items-end justify-end space-x-3">
                                <div class="text-right">
                                    <div class="text-white font-semibold">Chris</div>
                                    <div class="text-white/70 text-sm">Developer & Playlist Curator</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Use Cases Section -->
    <div class="relative py-16 bg-dark-surface">
        <div class="w-full max-w-6xl mx-auto px-4">
            <h3 class="scroll-reveal text-3xl font-bold text-white text-center mb-12">Perfect For</h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Card 1: Curated Collections -->
                <div class="scroll-reveal scroll-reveal-delay-1 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Music notes SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold text-white mb-3">Curated Collections</h4>
                    <p class="text-white/70">Keep your curated playlists fresh, especially after adding new songs.</p>
                </div>

                <!-- Card 2: Tastemaker Playlists -->
                <div class="scroll-reveal scroll-reveal-delay-2 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Headphones SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 14v3a2 2 0 01-2 2h-1a2 2 0 01-2-2v-1a2 2 0 012-2h3zm0 0V9a7 7 0 00-14 0v5m0 0h3a2 2 0 012 2v1a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold text-white mb-3">Tastemaker Playlists</h4>
                    <p class="text-white/70">Perfect for tastemakers who want to mix it up and get those new adds to the top for their followers.</p>
                </div>

                <!-- Card 3: New Perspectives -->
                <div class="scroll-reveal scroll-reveal-delay-3 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Refresh/rotate SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold text-white mb-3">New Perspectives</h4>
                    <p class="text-white/70">Make your playlists feel new with a quick shuffle.</p>
                </div>

                <!-- Card 4: Playlist Maintenance -->
                <div class="scroll-reveal scroll-reveal-delay-4 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Wrench/settings SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold text-white mb-3">Playlist Maintenance</h4>
                    <p class="text-white/70">Reorder that massive playlist that you've been meaning to update with one click.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="relative py-16">
        <div class="w-full max-w-6xl mx-auto px-4">
            <h3 class="scroll-reveal text-3xl font-bold text-white text-center mb-12">Powerful Features</h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Feature 1: 7 Shuffle Algorithms -->
                <div class="scroll-reveal scroll-reveal-delay-1 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Grid/algorithm SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold mb-3 text-white">7 Shuffle Algorithms</h4>
                    <p class="text-white/70">
                        From artist spacing to album sequencing, choose the perfect strategy to reorder your playlist.
                    </p>
                </div>

                <!-- Feature 2: Instant Undo -->
                <div class="scroll-reveal scroll-reveal-delay-2 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Undo arrow SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h10a5 5 0 015 5v2M3 10l4-4m-4 4l4 4" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold mb-3 text-white">Instant Undo</h4>
                    <p class="text-white/70">
                        Not happy with the reorder? Revert to your previous playlist order with one click.
                    </p>
                </div>

                <!-- Feature 3: Playlist Workshop -->
                <div class="scroll-reveal scroll-reveal-delay-3 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Workshop/beaker SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold mb-3 text-white">Playlist Workshop</h4>
                    <p class="text-white/70">
                        Merge, raid, and craft playlists from multiple sources in an interactive workspace.
                    </p>
                </div>

                <!-- Feature 4: Scheduled Shuffles -->
                <div class="scroll-reveal scroll-reveal-delay-4 glass-card p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10">
                    <div class="w-10 h-10 mb-4 text-spotify-green">
                        <!-- Clock/schedule SVG -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold mb-3 text-white">Scheduled Shuffles</h4>
                    <p class="text-white/70">
                        Set it and forget it. Automate reordering on your schedule so your playlists stay fresh.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Trust Indicators -->
    <div class="relative py-12">
        <!-- Neon divider line replacing border-t -->
        <div class="neon-divider mb-12" aria-hidden="true"></div>

        <div class="w-full max-w-4xl mx-auto px-4 text-center">
            <div class="scroll-reveal grid grid-cols-2 md:grid-cols-4 gap-6 text-sm text-white/70">
                <div class="flex items-center justify-center">
                    <svg class="trust-icon w-5 h-5 mr-2 text-spotify-green" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                    </svg>
                    Secure OAuth
                </div>
                <div class="flex items-center justify-center">
                    <svg class="trust-icon w-5 h-5 mr-2 text-spotify-green" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    No Data Stored
                </div>
                <div class="flex items-center justify-center">
                    <svg class="trust-icon w-5 h-5 mr-2 text-spotify-green" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/>
                    </svg>
                    Instant Results
                </div>
                <div class="flex items-center justify-center">
                    <svg class="trust-icon w-5 h-5 mr-2 text-spotify-green" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                    </svg>
                    Free Forever
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Force legal links to be white */
    .legal-links a {
        color: #1DB954 !important;
    }

    /* Enhanced CTA button styles */
    .cta-button {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .cta-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(29, 185, 84, 0.4);
    }

    .cta-button:focus {
        outline: 2px solid white;
        outline-offset: 2px;
    }

    /* Animation for elements */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
        animation: fadeIn 1s ease-out;
    }

    /* ===== SCROLL REVEAL ANIMATION SYSTEM ===== */
    .scroll-reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1),
                    transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .scroll-reveal.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Stagger delay classes for sequential card/element animation */
    .scroll-reveal-delay-1 { transition-delay: 100ms; }
    .scroll-reveal-delay-2 { transition-delay: 200ms; }
    .scroll-reveal-delay-3 { transition-delay: 300ms; }
    .scroll-reveal-delay-4 { transition-delay: 400ms; }

    /* ===== TIMELINE CONNECTOR ===== */
    .timeline-connector {
        position: absolute;
        top: 28px; /* center of the 56px (w-14) step circles */
        left: calc(16.67% + 28px); /* start after first circle center */
        right: calc(16.67% + 28px); /* end before last circle center */
        height: 2px;
        background: linear-gradient(90deg,
            #1DB954 0%,
            rgba(29, 185, 84, 0.4) 50%,
            #1DB954 100%);
        box-shadow: 0 0 8px rgba(29, 185, 84, 0.4);
    }

    /* Vertical timeline connector for mobile */
    .timeline-connector-vertical {
        display: none;
    }

    @media (max-width: 767px) {
        .timeline-connector {
            display: none;
        }
        .timeline-connector-vertical {
            display: block;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 80px; /* below first circle */
            bottom: 80px; /* above last circle */
            width: 2px;
            background: linear-gradient(180deg,
                #1DB954 0%,
                rgba(29, 185, 84, 0.4) 50%,
                #1DB954 100%);
            box-shadow: 0 0 8px rgba(29, 185, 84, 0.4);
        }
    }

    /* ===== STEP CIRCLE GLOW ===== */
    .step-circle {
        box-shadow: 0 0 15px rgba(29, 185, 84, 0.5),
                    0 0 30px rgba(29, 185, 84, 0.2);
        transition: all 0.3s ease;
    }
    .step-circle:hover {
        box-shadow: 0 0 20px rgba(29, 185, 84, 0.7),
                    0 0 40px rgba(29, 185, 84, 0.3);
        transform: scale(1.1);
    }

    /* ===== GLASS CARD HOVER ===== */
    .glass-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .glass-card:hover {
        transform: translateY(-4px);
        border-color: rgba(29, 185, 84, 0.4);
        box-shadow: 0 0 20px rgba(29, 185, 84, 0.15),
                    0 8px 32px rgba(0, 0, 0, 0.3);
    }

    /* ===== NEON SECTION DIVIDER ===== */
    .neon-divider {
        height: 1px;
        background: linear-gradient(90deg,
            transparent 0%,
            rgba(29, 185, 84, 0.6) 50%,
            transparent 100%);
        box-shadow: 0 0 8px rgba(29, 185, 84, 0.3);
    }

    /* ===== TRUST ICON GLOW ===== */
    .trust-icon {
        filter: drop-shadow(0 0 4px rgba(29, 185, 84, 0.4));
        transition: filter 0.3s ease;
    }
    .trust-icon:hover {
        filter: drop-shadow(0 0 8px rgba(29, 185, 84, 0.6));
    }

    /* ===== TESTIMONIAL QUOTE MARK ===== */
    .quote-decoration {
        position: absolute;
        top: -10px;
        left: 20px;
        font-size: 6rem;
        line-height: 1;
        color: rgba(29, 185, 84, 0.15);
        font-family: Georgia, serif;
        pointer-events: none;
        user-select: none;
    }

    /* ===== TESTIMONIAL LEFT ACCENT BAR ===== */
    .quote-accent-bar {
        border-left: 3px solid #1DB954;
        box-shadow: -4px 0 12px rgba(29, 185, 84, 0.3);
    }

    /* ===== SHUFFLE DEMO ANIMATION STYLES ===== */

    /* Card border glow pulse when shuffle triggers */
    .shuffle-demo-card.is-shuffling {
        animation: cardGlow 0.5s ease-in-out;
    }

    @keyframes cardGlow {
        0% { border-color: rgba(29, 185, 84, 0.15); box-shadow: 0 0 40px rgba(29, 185, 84, 0.05); }
        50% { border-color: rgba(29, 185, 84, 0.4); box-shadow: 0 0 60px rgba(29, 185, 84, 0.12); }
        100% { border-color: rgba(29, 185, 84, 0.15); box-shadow: 0 0 40px rgba(29, 185, 84, 0.05); }
    }

    /* Individual track item base styles */
    .shuffle-track {
        display: flex;
        align-items: center;
        padding: 8px 16px;
        margin: 0 8px;
        border-radius: 8px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        will-change: transform;
        transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1),
                    box-shadow 0.3s ease,
                    background-color 0.3s ease;
    }

    .shuffle-track:last-child {
        border-bottom: none;
    }

    /* Hover state for tracks */
    .shuffle-track:hover {
        background: rgba(29, 185, 84, 0.05);
    }

    /* Track glow effect during animation */
    .shuffle-track.is-moving {
        box-shadow: 0 0 12px rgba(29, 185, 84, 0.15);
        background: rgba(29, 185, 84, 0.03);
    }

    /* Album art gradient squares */
    .shuffle-track-art {
        width: 40px;
        height: 40px;
        border-radius: 6px;
        flex-shrink: 0;
        margin-right: 12px;
    }

    /* Track text info */
    .shuffle-track-name {
        font-size: 14px;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.3;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 180px;
    }

    .shuffle-track-artist {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.45);
        line-height: 1.3;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 180px;
    }

    /* Track duration */
    .shuffle-track-duration {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.35);
        margin-left: auto;
        padding-left: 12px;
        flex-shrink: 0;
        font-variant-numeric: tabular-nums;
    }

    /* Staggered transition delays per track */
    .shuffle-track[data-index="0"] { transition-delay: 0ms; }
    .shuffle-track[data-index="1"] { transition-delay: 30ms; }
    .shuffle-track[data-index="2"] { transition-delay: 60ms; }
    .shuffle-track[data-index="3"] { transition-delay: 90ms; }
    .shuffle-track[data-index="4"] { transition-delay: 120ms; }
    .shuffle-track[data-index="5"] { transition-delay: 150ms; }
    .shuffle-track[data-index="6"] { transition-delay: 180ms; }
    .shuffle-track[data-index="7"] { transition-delay: 210ms; }

    /* Tracks moving upward get a smoother ease */
    .shuffle-track.moving-up {
        transition-timing-function: cubic-bezier(0.22, 0.61, 0.36, 1);
    }

    /* Tracks moving downward get a slight overshoot bounce */
    .shuffle-track.moving-down {
        transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
    }
</style>

<script>
    // Enable/disable login button based on checkbox and update CTA text
    document.addEventListener('DOMContentLoaded', function() {
        const checkbox = document.getElementById('legal-consent');
        const loginButton = document.getElementById('login-button');
        const ctaSubtext = document.getElementById('cta-subtext');
        
        if (checkbox && loginButton) {
            function updateButtonState() {
                const isChecked = checkbox.checked;
                loginButton.disabled = !isChecked;
                
                // Update CTA subtext based on checkbox state
                if (ctaSubtext) {
                    if (isChecked) {
                        ctaSubtext.textContent = 'Free • Ready to Start';
                        ctaSubtext.classList.add('text-spotify-green');
                    } else {
                        ctaSubtext.textContent = 'Free • Approve & Connect';
                        ctaSubtext.classList.remove('text-spotify-green');
                    }
                }
            }
            
            checkbox.addEventListener('change', updateButtonState);
            updateButtonState(); // Initial state
        }

        // ===== SCROLL REVEAL ANIMATION SYSTEM =====
        // Observe all .scroll-reveal elements and add .visible when they enter viewport.
        // Stagger delays are handled by CSS transition-delay classes on individual elements.
        const scrollObserverOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -60px 0px'
        };

        const scrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Stop observing once revealed (one-shot animation)
                    scrollObserver.unobserve(entry.target);
                }
            });
        }, scrollObserverOptions);

        // Observe every element with the .scroll-reveal class
        document.querySelectorAll('.scroll-reveal').forEach(el => {
            scrollObserver.observe(el);
        });
    });
</script>

<script>
(function() {
    'use strict';

    // Track data — realistic names, artists, durations, album art gradients
    var TRACKS = [
        { name: 'Midnight Drive',   artist: 'Luna Wave',      duration: '3:42', gradient: 'linear-gradient(135deg, #667eea, #764ba2)' },
        { name: 'Electric Dreams',  artist: 'Neon Pulse',     duration: '4:15', gradient: 'linear-gradient(135deg, #f093fb, #f5576c)' },
        { name: 'Golden Hour',      artist: 'Amber Skies',    duration: '3:28', gradient: 'linear-gradient(135deg, #4facfe, #00f2fe)' },
        { name: 'Velvet Thunder',   artist: 'Storm Chaser',   duration: '5:01', gradient: 'linear-gradient(135deg, #43e97b, #38f9d7)' },
        { name: 'Cosmic Drift',     artist: 'Star Wanderer',  duration: '3:55', gradient: 'linear-gradient(135deg, #fa709a, #fee140)' },
        { name: 'Ocean Waves',      artist: 'Deep Current',   duration: '4:33', gradient: 'linear-gradient(135deg, #a18cd1, #fbc2eb)' },
        { name: 'Neon Lights',      artist: 'City Pulse',     duration: '3:17', gradient: 'linear-gradient(135deg, #ffecd2, #fcb69f)' },
        { name: 'Shadow Dance',     artist: 'Phantom Beat',   duration: '4:48', gradient: 'linear-gradient(135deg, #a1c4fd, #c2e9fb)' }
    ];

    var TRACK_HEIGHT = 56;
    var SETTLE_DURATION = 2500;
    var SHUFFLE_ANIMATION_DURATION = 1000;
    var GLOW_DURATION = 500;
    var INITIAL_DELAY = 1500;

    var currentOrder = TRACKS.map(function(_, i) { return i; });
    var trackElements = [];
    var isAnimating = false;
    var animationTimer = null;

    function renderTracks() {
        var container = document.getElementById('shuffle-track-list');
        if (!container) return;

        container.innerHTML = '';
        container.style.height = (TRACKS.length * TRACK_HEIGHT) + 'px';
        container.style.position = 'relative';

        trackElements = TRACKS.map(function(track, index) {
            var el = document.createElement('div');
            el.className = 'shuffle-track';
            el.setAttribute('data-index', index);
            el.style.position = 'absolute';
            el.style.left = '0';
            el.style.right = '0';
            el.style.height = TRACK_HEIGHT + 'px';
            el.style.transform = 'translateY(' + (index * TRACK_HEIGHT) + 'px)';

            el.innerHTML =
                '<div class="shuffle-track-art" style="background: ' + track.gradient + ';"></div>' +
                '<div style="min-width: 0; flex: 1;">' +
                    '<div class="shuffle-track-name">' + track.name + '</div>' +
                    '<div class="shuffle-track-artist">' + track.artist + '</div>' +
                '</div>' +
                '<div class="shuffle-track-duration">' + track.duration + '</div>';

            container.appendChild(el);
            return el;
        });
    }

    function generateNewOrder() {
        var newOrder, attempts = 0, changedCount;
        do {
            newOrder = currentOrder.slice();
            for (var i = newOrder.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = newOrder[i];
                newOrder[i] = newOrder[j];
                newOrder[j] = temp;
            }
            changedCount = 0;
            for (var k = 0; k < newOrder.length; k++) {
                if (newOrder[k] !== currentOrder[k]) changedCount++;
            }
            attempts++;
        } while (changedCount < 3 && attempts < 20);
        return newOrder;
    }

    function performShuffle() {
        if (isAnimating) return;
        isAnimating = true;

        var card = document.getElementById('shuffle-demo');
        var indicator = document.getElementById('shuffle-indicator');

        if (card) card.classList.add('is-shuffling');
        if (indicator) indicator.style.opacity = '1';

        setTimeout(function() {
            var newOrder = generateNewOrder();

            for (var trackIndex = 0; trackIndex < TRACKS.length; trackIndex++) {
                var currentPosition = currentOrder.indexOf(trackIndex);
                var newPosition = newOrder.indexOf(trackIndex);
                var el = trackElements[trackIndex];

                if (!el) continue;

                el.classList.remove('moving-up', 'moving-down', 'is-moving');
                if (newPosition < currentPosition) {
                    el.classList.add('moving-up');
                } else if (newPosition > currentPosition) {
                    el.classList.add('moving-down');
                }

                if (newPosition !== currentPosition) {
                    el.classList.add('is-moving');
                }

                el.style.transform = 'translateY(' + (newPosition * TRACK_HEIGHT) + 'px)';
            }

            currentOrder = newOrder;

            setTimeout(function() {
                for (var i = 0; i < trackElements.length; i++) {
                    trackElements[i].classList.remove('moving-up', 'moving-down', 'is-moving');
                }
                if (card) card.classList.remove('is-shuffling');
                if (indicator) indicator.style.opacity = '0';
                isAnimating = false;

                animationTimer = setTimeout(performShuffle, SETTLE_DURATION);
            }, SHUFFLE_ANIMATION_DURATION);
        }, GLOW_DURATION);
    }

    function startAnimation() {
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            renderTracks();
            return;
        }

        renderTracks();
        animationTimer = setTimeout(performShuffle, INITIAL_DELAY);
    }

    function stopAnimation() {
        if (animationTimer) {
            clearTimeout(animationTimer);
            animationTimer = null;
        }
        isAnimating = false;
    }

    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            stopAnimation();
        } else {
            if (!animationTimer && document.getElementById('shuffle-track-list')) {
                animationTimer = setTimeout(performShuffle, SETTLE_DURATION);
            }
        }
    });

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', startAnimation);
    } else {
        startAnimation();
    }
})();
</script>
{% endblock %} 