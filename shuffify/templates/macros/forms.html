{# macros/forms.html - Reusable form field macros #}

{% macro select_field(label, field_id, field_name, options, selected='', help_text='', onchange='') %}
<div>
  <label for="{{ field_id }}" class="block text-sm font-medium text-white/90 mb-1">
    {{ label }}
  </label>
  <select id="{{ field_id }}" name="{{ field_name }}"
          class="w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-white/30 focus:border-transparent"
          {% if onchange %}onchange="{{ onchange }}"{% endif %}>
    {% for option in options %}
    <option value="{{ option.value }}"
            {% if option.value == selected %}selected{% endif %}
            {% if option.extra_attrs %}{{ option.extra_attrs }}{% endif %}>
      {{ option.label }}
    </option>
    {% endfor %}
  </select>
  {% if help_text %}
  <p class="mt-1 text-xs text-white/50">{{ help_text }}</p>
  {% endif %}
</div>
{% endmacro %}

{% macro toggle_field(label, field_id, field_name, checked=false, description='') %}
<div class="flex items-center justify-between">
  <div>
    <label for="{{ field_id }}" class="text-sm font-medium text-white/90">
      {{ label }}
    </label>
    {% if description %}
    <p class="text-xs text-white/50">{{ description }}</p>
    {% endif %}
  </div>
  <label class="relative inline-flex items-center cursor-pointer">
    <input type="hidden" name="{{ field_name }}" value="false">
    <input type="checkbox" id="{{ field_id }}" name="{{ field_name }}"
           value="true" class="sr-only peer"
           {% if checked %}checked{% endif %}>
    <div class="w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-white/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-spotify-green"></div>
  </label>
</div>
{% endmacro %}
